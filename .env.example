# Wakeify Environment Configuration
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ============================================
# REQUIRED: Spotify API Credentials
# ============================================
# Get these from: https://developer.spotify.com/dashboard
SPOTIFY_CLIENT_ID=your_client_id_here
SPOTIFY_CLIENT_SECRET=your_client_secret_here

# OAuth redirect URI (must match Spotify app settings)
# Must use HTTPS protocol
SPOTIFY_REDIRECT_URI=https://your-container-ip/callback

# ============================================
# REQUIRED: Application Security
# ============================================
# Generate with: openssl rand -hex 32
APP_SECRET=your_secure_random_secret_here

# ============================================
# REQUIRED: Network Configuration
# ============================================
# Set these to match your local network
CONTAINER_IP=192.168.1.11
GATEWAY_IP=192.168.1.1
NETWORK_SUBNET=192.168.1.0/24
NETWORK_INTERFACE=eth0

# ============================================
# OPTIONAL: Spotify Account Credentials
# ============================================
# Only needed if using spotifyd fallback for AirPlay streaming
# Leave empty if not using this feature
SPOTIFY_USERNAME=
SPOTIFY_PASSWORD=

# ============================================
# OPTIONAL: Alarm Configuration
# ============================================
# Default speaker device (leave empty for auto-detection)
DEFAULT_SPEAKER=

# Default volume level (0-100)
DEFAULT_VOLUME=30

# Enable shuffle by default
DEFAULT_SHUFFLE=true

# ============================================
# OPTIONAL: System Configuration
# ============================================
# Base directory for data files
BASE_DIR=/data/wakeify

# Timezone (default: America/New_York)
TZ=America/New_York

# Logging level (INFO, DEBUG, WARNING, ERROR)
LOG_LEVEL=INFO

# Log format (text, json)
LOG_FORMAT=text

# ============================================
# OPTIONAL: Playback Configuration
# ============================================
# Enable alarm pre-warming
ALARM_PREWARM_ENABLED=true

# Pre-warm time in seconds
ALARM_PREWARM_S=60

# Poll fast period in seconds
ALARM_POLL_FAST_S=5.0

# Total poll deadline in seconds
ALARM_POLL_DEADLINE_S=20

# Debounce time after device is seen (seconds)
ALARM_DEBOUNCE_S=0.6

# Retry delay for 404 errors (seconds)
ALARM_RETRY_404_S=0.7

# Failover activation delay (seconds)
ALARM_FAILOVER_S=2.0

# ============================================
# OPTIONAL: Device Discovery
# ============================================
# Enable automatic device discovery
DEVICE_AUTO_DISCOVERY=true

# mDNS discovery timeout (seconds)
MDNS_DISCOVERY_TIMEOUT_S=1.5

# Device wake timeout (seconds)
DEVICE_WAKE_TIMEOUT_S=22

# ============================================
# OPTIONAL: Fallback Configuration
# ============================================
# Fallback timeout (seconds)
FALLBACK_TIMEOUT_S=10

# Quick check attempts
FALLBACK_QUICK_CHECK_ATTEMPTS=2

# Wake attempts
FALLBACK_WAKE_ATTEMPTS=3

# mDNS timeout for fallback (seconds)
FALLBACK_MDNS_TIMEOUT_S=5

# ============================================
# OPTIONAL: Circuit Breaker Configuration
# ============================================
# Failure threshold before circuit opens
CIRCUIT_BREAKER_FAILURE_THRESHOLD=3

# Recovery timeout (seconds)
CIRCUIT_BREAKER_RECOVERY_TIMEOUT_S=300

# ============================================
# OPTIONAL: Performance Configuration
# ============================================
# Maximum concurrent alarms
MAX_CONCURRENT_ALARMS=5

# Alarm queue size
ALARM_QUEUE_SIZE=100

# ============================================
# OPTIONAL: Monitoring Configuration
# ============================================
# Enable execution metrics
METRICS_ENABLED=true

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL_S=30

# ============================================
# OPTIONAL: Advanced Timeout Configuration
# ============================================
# Poll deadline extension after addUser succeeds (seconds)
ALARM_POLL_DEADLINE_EXTENSION_S=10

# Wait time after addUser before checking devices (seconds)
ALARM_ADDUSER_WAIT_S=5.0

# mDNS discovery timeout (seconds)
ALARM_MDNS_TIMEOUT_S=1.5

# getInfo request timeout (seconds)
ALARM_GETINFO_TIMEOUT_S=1.5

# addUser request timeout (seconds)
ALARM_ADDUSER_TIMEOUT_S=2.5

# getDeviceInfo request timeout (seconds)
ALARM_DEVICE_INFO_TIMEOUT_S=2.0

# verifyDeviceReady timeout (seconds)
ALARM_VERIFY_DEVICE_TIMEOUT_S=0.5

# Sleep time in confirmation loop (seconds)
ALARM_CONFIRMATION_SLEEP_S=0.2

# Sleep time during fast polling (seconds)
ALARM_POLL_SLEEP_FAST_S=0.5

# Sleep time during slow polling (seconds)
ALARM_POLL_SLEEP_SLOW_S=1.0
